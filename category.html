<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kategori</title>

<style>
body{font-family:Arial;margin:0;background:#fff1f6}
.wrap{max-width:1100px;margin:auto;padding:20px}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:15px}
.card{background:#fff;border-radius:14px;overflow:hidden;padding:10px}
.img{width:100%;height:180px;object-fit:cover}
.btn{background:#ff2e88;color:#fff;border:none;padding:10px;width:100%;margin-top:8px}
</style>
</head>

<body>

<div class="wrap">
<h2 id="title"></h2>
<div id="grid" class="grid"></div>
</div>

<script>
const BASE = "/p-nar-oto-aksesuar";

function imgFix(v){
  if(!v) return BASE+"/resimler/placeholder.jpg";
  if(v.startsWith("http")) return v;
  return BASE+"/resimler/"+v;
}

const params = new URLSearchParams(location.search);
const cat = params.get("category");

document.getElementById("title").textContent = cat;

async function load(){
  const res = await fetch(BASE+"/veri/urunler.json?"+Date.now());
  const data = await res.json();

  const list = data.filter(x => x.category === cat);

  document.getElementById("grid").innerHTML =
  list.map(p=>`
    <div class="card">
      <img class="img" src="${imgFix(p.img)}">
      <b>${p.title}</b>
      <div>₺ ${p.price}</div>
      <button class="btn">Ürünü Gör</button>
    </div>
  `).join("");
}

load();
</script>

</body>
</html>
